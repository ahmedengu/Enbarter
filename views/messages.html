<div class="container margin-top30" ng-controller="messagesCtrl">
    <div class="row">
        <div class="col-sm-2">
            <ul class="list-group">
                <li ng-repeat="thread in threads" on-finish-render="ngRepeatFinished" class="list-group-item">
                    <a href="/messages/{{thread.get('user').id==currentUser.id?thread.get('to').id:thread.get('user').id}}">{{thread.get('user').id==currentUser.id?thread.get('to').get('username'):thread.get('user').get('username')}}</a>
                </li>
            </ul>
        </div>
        <div class="col-sm-10 " ng-show="threads.length">
            <div class="chatbox well" style="height: 300px;overflow-y: scroll;" id="messageBox">
                <div ng-repeat="m in messages" on-finish-render="ngRepeatFinished">
                    <a href="/profile/{{m.get('user').id}}"
                       class="{{m.get('user').id==userId?'text-danger':'text-primary'}}">{{m.get('user').get('username')}}:</a>
                    <div ng-bind-html="m.get('message')"></div>
                </div>
            </div>
            <form role="form" ng-submit="sendMessage()">
                <textarea class="form-control summernote" rows="3" id="message"></textarea>
                <button class="btn btn-block btn-info" ng-disabled="cantSend">
                    Send!
                </button>
            </form>
        </div>
        <div class="col-sm-10 " ng-hide="threads.length">
            <div class="min-height-400px promo-2 text-center content-block">
                <br><br>
                <h1 class="black">Nothing to show!</h1>
            </div>
        </div>
    </div>

    <div ng-include="'views/textEditor.html'"></div>
</div>
